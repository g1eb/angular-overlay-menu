"use strict";angular.module("g1b.overlay-menu",[]).directive("overlayMenu",["$document","$timeout",function(e,n){return{restrict:"E",replace:!0,template:'<div class="overlay-menu" ng-show="!!active"><div class="overlay-menu--container"><div class="overlay-menu--column"><div class="overlay-menu--row" ng-repeat="item in items" ng-click="select(item)"><span ng-bind="item.name"></span></div></div><div class="overlay-menu--column" ng-if="!!selected.items"><div class="overlay-menu--row" ng-repeat="item in selected.items" ng-click="select(item)"><span ng-bind="item.name"></span></div></div></div></div>',scope:{items:"=",onSelect:"&"},compile:function(){return{pre:function(){},post:function(t,i){t.select=function(e){t.selected=e,t.selected.items||(t.active=!1,t.onSelect({item:t.selected}))},e.on("mousedown",function(e){t.active||0!==e.button||(t.timeoutId=n(function(){t.$apply(function(){t.active=!0})},500))}),e.on("mouseup",function(e){n.cancel(t.timeoutId)}),e.on("keyup",function(e){27===e.keyCode&&t.$apply(function(){t.active=!t.active})})}}}}}]);